<!DOCTYPE html>
<html>
  <head>
    <title>DecodeDelhi</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">  
    <meta name="format-detection" content="telephone=no" />

    <meta charset="utf-8">
    <link href="css/main.css" rel="stylesheet" media="screen" type="text/css">

    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }

      #map-canvas{
        z-index: 1;
        
      }
    </style>

    <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <!--
    Include the maps javascript with sensor=true because this code is using a
    sensor (a GPS locator) to determine the user's location.
    See: https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API
    -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCj64SLgM6xw5SvmXq25OH_-Md-kwyeNeQ&sensor=true"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <script src="https://www.google.com/jsapi" type="text/javascript"></script>

    <script src="/public/js/handlebars-v1.3.0.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <script>

      var socket  = null;
      var searchText = null;
      var instagramData = null;
        //initializing socket
          socket = io.connect('/'); // 'http://localhost:8080' //'{{ socketIOHost }}'

        //Accordion Menu 
        $(document).ready(function(){

          //initializing socket
         // socket = io.connect('/'); // 'http://localhost:8080' //'{{ socketIOHost }}'


          //display the intagram image when received from the server
           socket.on('searchresult', function (data) {
                    //console.log("Got image");
                    instagramData = data;
                    console.log(data[0]);
                    var dataAmt;
                    if (data.length < 20){
                      dataAmt = data.length;
                    }
                    else{
                      dataAmt = 20;
                    }

                    for (var i = 0; i < dataAmt; i++){
                        var imageLink = data[i].images.thumbnail.url;
                        var imgHTML = "<img src='" + imageLink + "'>";
                        $("#imgContent").append(imgHTML);
                    }

              });


//ul li table tr td
//ul li ul li
      
        $('#cssmenu ul ul li:odd').addClass('odd');
        $('#cssmenu ul ul li:even').addClass('even');
        $('#cssmenu > ul > li > a').click(function() {
          $('#cssmenu li').removeClass('active');
          $(this).closest('li').addClass('active'); 
          var checkElement = $(this).next();
          if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
            $(this).closest('li').removeClass('active');
            checkElement.slideUp('normal');
          }
          if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
            $('#cssmenu ul ul:visible').slideUp('normal');
            checkElement.slideDown('normal');
          }
          if($(this).closest('li').find('ul').children().length == 0) {
            return true;
          } else {
            return false; 
          }   
        });

        $("span #mpcClients").click(function() {
        $("#hidden0").slideToggle(500);

        // This adds a class if the element doesn't already have it
        // if the element already has the class it will remove it.
        $("td h3").toggleClass("right down"); 
       });

  });




//ading function triggered by the search box
//function sendInstagramSearchRequest(searchText){
function sendInstagramSearchRequest(){  
      console.log("here");
      searchText =  document.forms["input"]["place"].value; 
      socket.emit('clientSearch',searchText);
}


//Accordion Menu finish

// Note: This example requires that you consent to location sharing when
// prompted by your browser. If you see a blank space instead of the map, this
// is probably because you have denied permission for location sharing.


var map;

function initialize() {
  var mapOptions = {
    zoom: 14,
    center: new google.maps.LatLng(28.628052, 77.218454),
    mapTypeControl: false,
    panControl: false,
    scaleControl: true,
    streetViewControl: false,
    zoomControl: true,
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL,
      position: google.maps.ControlPosition.LEFT_BOTTOM
    }
  }
  
  map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  // Try HTML5 geolocation
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = new google.maps.LatLng(position.coords.latitude,
                                       position.coords.longitude);

      var infowindow = new google.maps.InfoWindow({
        map: map,
        position: pos,
        content: 'Location found using HTML5.'
      });

      map.setCenter(pos);
    }, function() {
      handleNoGeolocation(true);
    });
  } else {
    // Browser doesn't support Geolocation
    handleNoGeolocation(false);
  }
}

function handleNoGeolocation(errorFlag) {
  if (errorFlag) {
    var content = 'Error: The Geolocation service failed.';
  } else {
    var content = 'Error: Your browser doesn\'t support geolocation.';
  }

  var options = {
    map: map,
    position: new google.maps.LatLng(28.628052, 77.218454),
    content: content
  };

  var infowindow = new google.maps.InfoWindow(options);
  map.setCenter(options.position);
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  <body>
    
    <header id="header">
                                      <div id="sticky">
                                          <div id="nav-bar">
                                            <div id="headerBar"></div>
                                            <div id="nav-bar1"><a href="homepage"  id="homelink"><img width="200px" src="image/logo.png" alt="logo"/></a></div>

                                            <div id="nav-bar2"></div>
                                            <div id="nav-bar3">
                                                 <div id="internal-links">
                                                   <!--   <h3 style="position: absolute; left:40%; display:inline;"><snap style="color:#191547;">#</snap>BeSafe <snap style="color:#F68E47;">#</snap>BeSmart  <snap style="color:#E8238E;">#</snap>KnowMore</h3>-->
                                                    <!-- <ul class="nav">
                                                      <li><a href="#">About</a></li>
                                                      <li><a href="#">How To Participate</a></li>
                                                      <li><a href="#">Privacy Policy</a></li>
                                                  </ul>-->

                                                  <span class="nav"><a href="#">About</a> <strong>.</strong> <a href="#">How To Participate</a> <strong>.</strong> <a href="#">Privacy Policy</a></span>
                                                 </div>
                                                 </div>
                                            </div>

                                            <div id="nav-bar4"></div>
                                      </div>
                                    </div>
    </header>

    <div id="wrap"  > 
                    
                    <div class="column_grid">
                              <div class="column_grid1 ">
                                <div id='cssmenu'>
                                  <ul>
                                      <li>
                                        <a href='#'><img class="a" width="30px" src="image/besafe30x30.png" alt="symbol"/><span>Report Harassment</span></a>
                                         
                                            <table style="width:100%">
                                                        <tr>
                                                          <td><img class="iconimg" src="image/instagramicon22x22.png" alt="symbol"/></td>
                                                          <td><snap>Instagram or Tweet, Your Story With<snap style="color:#51C8EF;"> Location Tag</snap>,<snap style="color:#5D2C84;"> #area name(eg.#Janpath) #BeSafe #DeCodeDelhi</snap></snap></td>
                                                         </tr>

                                                         <tr>
                                                          <td><img class="iconimg" src="image/besafe30x30.png" alt="symbol"/></td>
                                                          <td><a href='#'><snap>Drop Anonymously</snap></a></td>
                                                          <td><a href='#'><img class="iconimg2" src="image/right-arrow.png" alt="symbol"/></a></td></tr>
                                                          <!--<form action="/myaction" autocomplete="on" method="post">
                                                                    <p class="required_notification">* Denotes Required Field</p>
                                                                      <fieldset>
                                                                      <p><label class="comments">Gender:<span style="color:red;">* </span></label>
                                                                      <input type="radio" name="sex" value="male">Male
                                                                      <input type="radio" name="sex" value="female">Female
                                                                      <input type="radio" name="sex" value="female">others <br></p>

                                                                     <p><label class="comments">Catagory Of Harassment:<span style="color:red;">* </span></label>
                                                                        <select name="Catagory Of Harassment">
                                                                            <option value="None selected">Please select below</option>
                                                                            <option value="Groping">Groping/Unwanted Touching</option>
                                                                            <option value="Comments/Questions">Taking pictures </option>
                                                                            <option value="Sexually Offensive Gestures">Sexually Offensive Gestures</option>
                                                                            <option value="Stalking">Stalking/Blocking Path</option>
                                                                            <option value="">Comments about appearance, gender, sexual orientation</option>
                                                                        </select></p>
                                                                     <p><label class="comments">Add Details:<span style="color:red;">* </span> </label>
                                                                      <textarea id="text-box" name="write your comment here!!" rows="3" maxlength="120" cols="60"></textarea></p>
                                                                     
                                                                        <input type="hidden" name="currentPage" id="currentPage" value="xGnNoIRarS2xaeruqGKPAjQAUOiMwT9AigWJnfNTm64=" />

                                                                          <input id="saveForm" name="saveForm" class="btTxt submit" 
                                                                          type="submit" value="submit"
                                                                        onmousedown="doSubmitEvents();" />

                                                                      
                                                                    </fieldset>
                                                                       
                                                                    </form> -->
                                                         
                                                          
                                                          
                                                    <!--******</tr>****************Report Harassment end ***********-->
                                                  </table> 
                                    </li>

                                                <li><a href='#'><img class="a" width="30px" src="image/besmart30x30.png" alt="symbol"/><span>Drop A Smart Tip</span></a>
                                                 <table style="width:100%">
                                                  <tr>
                                                          <td><img class="iconimg" src="image/instagramicon22x22.png" alt="symbol"/></td>
                                                          <td><snap>Instagram or Tweet, Your Story With<snap style="color:#51C8EF;"> Location Tag</snap>,<snap style="color:#5D2C84;"> #area name(eg.#Janpath) #BeSmart #DeCodeDelhi</snap></snap></td>
                                                        </tr>
                                                        <tr >
                                                          <td><img class="iconimg" src="image/besafe30x30.png" alt="symbol"/></td>
                                                          <td><a href='#'><snap>Drop Anonymously</snap></a></td>
                                                          <td><a href='#'><img class="iconimg2" src="image/right-arrow.png" alt="symbol"/></a></td>
                                                        </tr>
                                                    <!--**********************Drop A Smart Tip***********-->
                                                  </table>
                                                </li>

                                                <li><a href='#'><img class="a" width="30px" src="image/knowmore30x30.png" alt="symbol"/><span>What’s up Delhi?</span></a>
                                                 <table style="width:100%">
                                                  <tr>
                                                          <td><img class="iconimg" src="image/instagramicon22x22.png" alt="symbol"/></td>
                                                          <td><snap>Instagram or Tweet, Your Story With<snap style="color:#51C8EF;"> Location Tag</snap>,<snap style="color:#5D2C84;"> #area name(eg.#Janpath) #KnowMore #DeCodeDelhi</snap></snap></td>
                                                        </tr>
                                                        <tr>
                                                          <td><img class="iconimg" src="image/besafe30x30.png" alt="symbol"/></td>
                                                          <td><a href='#'><snap>Drop Anonymously</snap></a></td>
                                                          <td><a href='#'><img class="iconimg2" src="image/right-arrow.png" alt="symbol"/></a></td>
                                                        </tr>
                                                    <!--**********************What’s up Delhi?***********-->
                                                  </table>
                                                </li>
                                  </ul>





         <ul>
               <li><a href='#'><img class="a" width="30px" src="image/besafe30x30.png" alt="symbol"/><span>Report Harassment</span></a>
                <ul>
                  <li><table style="width:100%">
                          <tr>
                            <td><img class="iconimg" src="image/instagramicon22x22.png" alt="symbol"/></td>
                            <td><span>Instagram or Tweet, Your Story With<snap style="color:#51C8EF;"> Location Tag</snap>,<snap style="color:#5D2C84;"> #area name(eg.#Janpath) #BeSafe #DeCodeDelhi</snap></span></td>
                          </tr>
                        </table>
                    </li>
                  <li><table style="width:100%">
                          <tr>
                            <td><img src="image/besafe30x30.png" alt="symbol"/></td>
                            <td><a href='#'><span>Drop Anonymously</span></a></td>
                             <td><a href='#'><img class="iconimg2" src="image/right-arrow.png" alt="symbol"/></a></td>
                          </tr>
                        </table>
                  </li>
                </ul>
               </li>

               <li><a href='#'><img class="a" width="30px" src="image/besmart30x30.png" alt="symbol"/><span>Drop A Smart Tip</span></a>
                <ul>
                  <li><table style="width:100%">
                          <tr>
                            <td><img class="iconimg" src="image/instagramicon22x22.png" alt="symbol"/></td>
                            <td><span>Instagram or Tweet, Your Story With<snap style="color:#51C8EF;"> Location Tag</snap>,<snap style="color:#5D2C84;"> #area name(eg.#Janpath) #BeSafe #DeCodeDelhi</snap></span></td>
                          </tr>
                        </table>
                    </li>
                  <li><table style="width:100%">
                          <tr>
                            <td><img src="image/besmart30x30.png" alt="symbol"/></td>
                            <td><a href='#'><span>Drop Anonymously</span></a></td>
                             <td><a href='#'><img class="iconimg2" src="image/right-arrow.png" alt="symbol"/></a></td>
                          </tr>
                        </table>
                  </li>
                </ul>
               </li>

               <li><a href='#'><img class="a" src="image/knowmore30x30.png" alt="symbol"/><span>What’s up Delhi?</span></a>
                <ul>
                  <li><table style="width:100%">
                          <tr>
                            <td><img class="iconimg" src="image/instagramicon22x22.png" alt="symbol"/></td>
                            <td><span>Instagram or Tweet, Your Story With<snap style="color:#51C8EF;"> Location Tag</snap>,<snap style="color:#5D2C84;"> #area name(eg.#Janpath) #BeSafe #DeCodeDelhi</snap></span></td>
                          </tr>
                        </table>
                    </li>
                </ul>
               </li>

         </ul>

              




         <!--<ul>
               <li><a href='#'><img width="30px" src="image/besafe30x30.png" alt="symbol"/><span>Report Harassment</span></a>
                <ul><li style="vertical-align: middle;">
                        <img style="padding-top: 5px;" width="10%" src="image/instagramicon22x22.png" alt="symbol"/>
                        <span  style="float:right; width:80%">Instagram or Tweet, Your Story With<snap style="color:#51C8EF;"> Location Tag</snap>,<snap style="color:#5D2C84;"> #area name(eg.#Janpath) #BeSafe #DeCodeDelhi</snap></span>
                    </li>
                     <li><a href='#'><img width="20px" src="image/besafe30x30.png" alt="symbol"/><span>Drop Anonymously</span></a></li>
                </ul>
               </li>

               <li><a href='#'><img width="30px" src="image/besmart30x30.png" alt="symbol"/><span>Drop A Smart Tip</span></a>
                  <ul>
                     <li><a href='#'><span>Widgets</span></a></li>
                     <li><a href='#'><span>Menus</span></a></li>
                  </ul>
               </li>
               <li><a href='#'><img width="30px" src="image/knowmore30x30.png" alt="symbol"/><span>What’s up Delhi?</span><p class="right"></p></a>

                  <ul>
                     <li><a href='#'><span>About</span></a></li>
                  </ul>
               </li>
          </ul>-->


           </div>
        </div>


                             <!--********************************
                              IMAGE instagram
                              *********************************-->

                              <div class="column_grid2">
                                                  <div id="searchplaceboxwrapper">
                              <!--********************************
                              search bar
                              *********************************-->
                                                       <div id="searchboxwrapper">
                                                          <div class="searchbox">
                                                                   <form class="initial-searchbox-wrapper" name="input" role="search" method="get" action="">
                                                                    <input type="text" value="search" onfocus="if(this.value == 'value') { this.value = ''; }" onblur=”if(this.value == ”) { this.value = ”; }” name="place" class="searchboxinput">

                                                                    
                                                                    <!-- <input type="image" width="20px" src="image/search.png" value="" id="search_button" onClick="sendInstagramSearchRequest()">-->


                                                                      <input id="search_button" type="button" name="button" Value="Search" onClick="sendInstagramSearchRequest()">
                                                                   </form>
                                                                  <br/>
                                                          </div>
                                                        </div>

                             <!--********************************
                              Place will come from JS
                              *********************************-->

                                                        <div id="placenamewrapper">
                                                          <div id="placename"></div>
                                                        </div>
                                                </div>   <!--searchplaceboxwrapper end-->   

                              <!--********************************
                              IMAGE WRAPPER - content
                              *********************************-->
                                                       <div id="instaimage">
                                                        <div id="imgContent"></div>
                                                       </div>

                           </div><!--column_grid2 end-->
                  </div> <!--column_grid end-->

                 <div id="map-canvas"></div>
     </div><!--wrap end-->

     
              
  </body>
</html>